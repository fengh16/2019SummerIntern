# Deep Code Search

目的：

- 通过自然语言搜索代码

形式：

- 用统一的高维向量（代码片段和描述嵌入高维空间）
- 代码和描述有相似的向量

相关工作：

- 基于IR，如关键字匹配和同义词查询，但是高级意图和低级实现并不匹配
  - 如：代码中没有关键字或者关键字的同义词
- Deep API：但是API搜索之外，code search还与一些细节有关，比如参数不同

Embedding Techniques嵌入技术/distributed representation分布式表示：

- <https://zhuanlan.zhihu.com/p/22386230>
  - 在低维的空间中能够区分出两个词的不同，如有100个词，相当于100个棋子。如果用onehot方式来表示，我们需要建立100维的空间。但是现在，我们只需要建立一个二维的空间，在里划分很多格子（格子数量大于100个），然后把这些棋子（词）分散地放在不同的格子上。格子的坐标代表了相应的棋子（词）的向量表示。这样就相当于在两维的空间中表示了100个棋子（词）
- 固定长度的向量，相似的互相靠近
- 句子可以当作是词向量相加

RNN for Sequence Embedding：略，deep API的时候已经讲了

Joint Embedding of Heterogeneous Data异构数据的联合嵌入

- 如图像和自然语言
- 找到两种不同数据的关系，把他们都转成一样的向量表示，并且表示相似东西的对应的向量相近

CODEnn

- 包含CoNN（代码到向量）和DeNN（自然语言描述到向量），并且需要评价代码和自然语言描述的相似度的部分
- CoNN：
  - 考虑方法名称、API调用序列、代码中的token
    - 方法名称和API调用序列有顺序，所以用一个带maxpool的RNN，token不需要顺序
    - 里面有权重矩阵可以训练
  - 最后直接连起来成新向量
- DeNN
  - 乘权重矩阵之后直接扔maxpool的RNN
- 相似度用余弦相似度

训练

- 用代码片段和正确、错误描述

- loss用错误表述与正确表述 的 余弦距离之差（小于0则取0）

- 数据录入同Deep API，也是带注释的代码

- 双向LSTM

  


